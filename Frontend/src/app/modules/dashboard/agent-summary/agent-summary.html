<!-- <div class="card theme-card border-0 shadow-sm h-100">
  <div class="sidebar-header-slate">AGENT PERFORMANCE METRICS</div>
  
  <div class="card-body p-0">
    <div class="table-responsive">
      <table class="table table-hover align-middle mb-0">
        <thead class="bg-light">
          <tr>
            <th class="tiny-label ps-4">AGENT</th>
            <th class="tiny-label text-center">TICKETS</th>
            <th class="tiny-label text-center">EFFICIENCY</th>
            <th class="tiny-label text-center">AVG. TIME</th>
            <th class="tiny-label text-end pe-4">STATUS</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let agent of agentMetrics">
            <td class="ps-4">
              <div class="d-flex align-items-center">
                <div class="avatar-sm me-3" [class.border-danger]="agent.isHighRisk">
                  {{ agent.name.charAt(0) }}
                </div>
                <div>
                  <div class="fw-bold text-dark small">{{ agent.name }}</div>
                  <div class="tiny text-muted">{{ agent.email }}</div>
                </div>
              </div>
            </td>
            <td class="text-center fw-bold">{{ agent.assignedCount }}</td>
            <td class="text-center">
              <span class="text-success fw-bold">{{ agent.resolvedCount }}</span>
            </td>
            <td class="text-center text-muted small">
              {{ formatTime(agent.averageResolutionTimeMinutes) }}
            </td>
            <td class="text-end pe-4">
              <span *ngIf="agent.overdueCount > 0" class="badge bg-soft-danger text-danger border-danger-subtle">
                {{ agent.overdueCount }} Overdue
              </span>
              <span *ngIf="agent.overdueCount === 0" class="badge bg-soft-success text-success">
                Clear
              </span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div> -->


<div class="card theme-card accent-left-purple border-0 shadow-sm h-100">
  <div class="sidebar-header-slate d-flex justify-content-between">
    <span>AGENT PERFORMANCE LEADERBOARD</span>
    <i class="bi bi-person-badge"></i>
  </div>

  <div class="card-body p-0">
    <div class="table-responsive">
      <table class="table table-hover align-middle mb-0">
        <thead class="bg-light-subtle">
          <tr>
            <th class="tiny-label ps-4">AGENT</th>
            <th class="tiny-label text-center">TICKETS</th>
            <th class="tiny-label text-center">EFFICIENCY</th>
            <th class="tiny-label text-center">RESOLUTION RATE</th>
            <th class="tiny-label text-end pe-4">STATUS</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let agent of agentStats">
            <td class="ps-4">
              <div class="d-flex align-items-center">
                <div class="avatar-circle me-3">{{ agent.name.charAt(0) }}</div>
                <div>
                  <div class="fw-bold text-dark small">{{ agent.name }}</div>
                  <div class="tiny-text text-muted">{{ agent.email }}</div>
                </div>
              </div>
            </td>
            <td class="text-center">
              <span class="fw-bold text-dark">{{ agent.currentAssignments }}</span>
              <div class="tiny-text text-muted">{{ agent.resolvedCount }} Resolved</div>
            </td>
            <td class="text-center">
              <div class="d-flex flex-column align-items-center">
                <span class="fw-bold" [class.text-success]="agent.performanceScore > 70">
                  {{ agent.performanceScore }}%
                </span>
                <div class="progress w-75" style="height: 4px;">
                  <div class="progress-bar" [ngClass]="agent.performanceScore > 70 ? 'bg-success' : 'bg-warning'"
                    [style.width.%]="agent.performanceScore"></div>
                </div>
              </div>
            </td>
            <td class="text-center">
    <div class="d-flex flex-column">
        <!-- <span class="fw-bold text-dark fs-6">{{ agent.assignedCount }}</span>
        <span class="tiny-text text-muted">{{ agent.resolvedCount }} Resolved</span> -->
        <div class="stat-value text-info">
  {{ agent.resolutionRate | percent:'1.0-2' }}
</div>

    </div>
</td>

<!-- <td class="text-center">
    <div class="d-flex flex-column align-items-center" style="min-width: 100px;">
        <span class="fw-bold mb-1" [class.text-success]="agent.performanceScore > 70">
            {{ agent.performanceScore }}%
        </span>
        <div class="progress w-100">
            <div class="progress-bar" 
                 [ngClass]="agent.performanceScore > 70 ? 'bg-success' : 'bg-warning'"
                 [style.width.%]="agent.performanceScore">
            </div>
        </div>
    </div>
</td> -->
            <!-- <td class="text-center text-muted small">
              {{ agent.averageResolutionTimeMinutes }}
            </td> -->
            <td class="text-end pe-4">
              <span class="badge rounded-pill"
                [ngClass]="agent.isHighRisk ? 'bg-soft-danger text-danger' : 'bg-soft-success text-success'">
                {{ agent.statusLabel }}
              </span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>