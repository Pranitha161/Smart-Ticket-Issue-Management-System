<div class="profile-page-wrapper" *ngIf="user">
  <div class="profile-banner"></div>

  <div class="profile-card shadow-lg">
    <div class="card-header-actions">
      <button class="btn" (click)="goBack()" title="Go Back">
        <i class="bi bi-arrow-left"></i>
      </button>
    </div>

    <div class="profile-identity text-center">
      <div class="avatar-wrapper">
        <img [src]="'https://ui-avatars.com/api/?name=' + user.username + '&background=6c5ce7&color=fff&size=128'" 
             alt="User Avatar" class="profile-img">
        <div class="online-indicator"></div>
      </div>
      <h2 class="mt-3 mb-1">{{ user.username }}</h2>
      <p class="text-muted small mb-2"><i class="bi bi-envelope me-1"></i> {{ user.email }}</p>
      <div class="roles-container d-flex justify-content-center gap-2">
        <span *ngFor="let role of user.roles" class="badge-role">{{ role }}</span>
      </div>
      <p class="id-text mt-3">User ID: {{ user.displayId }}</p>
    </div>

    <hr class="my-4 opacity-25">

    <div class="profile-nav-tabs" *ngIf="!activeTab">
      <button class="nav-tab-btn" (click)="activeTab = 'edit'">
        <i class="bi bi-person-gear"></i>
        <span>Edit Profile</span>
        <i class="bi bi-chevron-right ms-auto"></i>
      </button>
      <button class="nav-tab-btn" (click)="activeTab = 'password'">
        <i class="bi bi-shield-lock"></i>
        <span>Security Settings</span>
        <i class="bi bi-chevron-right ms-auto"></i>
      </button>
    </div>

    <div class="profile-form-section transition-slide" *ngIf="activeTab === 'edit'">
      <div class="section-header">
        <h5><i class="bi bi-pencil-square me-2"></i>Update Information</h5>
        <button class="btn-close" (click)="activeTab = null"></button>
      </div>
      
      <div class="form-group mb-3">
        <label>Username</label>
        <div class="input-group">
          <span class="input-group-text"><i class="bi bi-person"></i></span>
          <input [(ngModel)]="user.username" class="form-control" placeholder="Username" />
        </div>
      </div>

      <div class="form-group mb-4">
        <label>Email Address</label>
        <div class="input-group">
          <span class="input-group-text"><i class="bi bi-at"></i></span>
          <input [(ngModel)]="user.email" class="form-control" placeholder="Email" />
        </div>
      </div>

      <button class="btn btn-save w-100" (click)="updateUser()">Save Changes</button>
    </div>

    <div class="profile-form-section transition-slide" *ngIf="activeTab === 'password'">
      <div class="section-header">
        <h5><i class="bi bi-key me-2"></i>Security Settings</h5>
        <button class="btn-close" (click)="activeTab = null"></button>
      </div>

      <div class="form-group mb-3">
        <label>Current Password</label>
        <input type="password" [(ngModel)]="oldPassword" class="form-control" placeholder="••••••••" />
      </div>

      <div class="form-group mb-4">
        <label>New Password</label>
        <input type="password" [(ngModel)]="newPassword" class="form-control" placeholder="••••••••" />
      </div>

      <button class="btn btn-save w-100" (click)="changePassword()">Update Password</button>
    </div>
   